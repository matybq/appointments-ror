
<%= form_tag(appointments_of_date_path, method: :get) do %>
  <div class="field">
    <%= label_tag :selected_date, "Search appointments of a date:" %>
    <%= date_field_tag :selected_date, params[:selected_date], type: "date" %>
    <%= submit_tag "Search", class: "btn btn-success" %>
  </div>
<% end %>

<% if @appointments_of_date.empty?%>
  <br><br><br>
  <h2> No appointments for today ! </h2>
<% else%>
  <div id="appointments">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Time</th>
          <th scope="col">Patient name</th>
          <th scope="col">Patient email</th>
          <th scope="col">Upd/Del</th>
        </tr>
      </thead>

      <tbody>
          <% @appointments_of_date.each do |appointment| %>
            <tr>
              <td> <%= appointment.time&.strftime("%H:%M") %></td>
              <td> <%= link_to appointment.patient.name, patient_path(appointment.patient), class: "text-dark" %> </td>
              <td> <%= appointment.patient.email %> </td>
              <td>
                <%= link_to 'Edit', edit_appointment_path(appointment), class: 'btn btn-primary' %>
                <%= link_to 'Delete', appointment_path(appointment) , method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %>
              </td>
            </tr>
          <% end %>     
      </tbody>
    </table>
  </div>
<% end%>